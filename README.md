# æµè§ˆå™¨æ‰©å±• - å…è®¸å¤åˆ¶

ä¸€ä¸ªè·¨æµè§ˆå™¨çš„æ‰©å±•ï¼Œç”¨äºç»•è¿‡ç½‘é¡µçš„å¤åˆ¶é™åˆ¶ï¼Œå…è®¸ç”¨æˆ·è‡ªç”±å¤åˆ¶ç½‘é¡µå†…å®¹ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ ä¸€é”®å¼€å¯/å…³é—­å¤åˆ¶åŠŸèƒ½
- ğŸ¯ æ”¯æŒæ‰€æœ‰ç½‘é¡µ
- ğŸŒ å¤šè¯­è¨€æ”¯æŒï¼ˆä¸­æ–‡/è‹±æ–‡ï¼‰
- ğŸ’« ç°ä»£åŒ–UIè®¾è®¡
- ğŸ”§ ä½¿ç”¨Webpackæ‰“åŒ…
- ğŸ“¦ æ¨¡å—åŒ–å¼€å‘
- ğŸ› ï¸ å¼€å‘ç¯å¢ƒçƒ­é‡è½½
- ğŸ¨ åŠ¨æ€å›¾æ ‡åˆ‡æ¢ï¼ˆå¼€å¯/å…³é—­çŠ¶æ€ï¼‰
- ğŸŒ è·¨æµè§ˆå™¨æ”¯æŒï¼ˆChromeã€Firefoxã€Edgeï¼‰

## æ”¯æŒçš„æµè§ˆå™¨

- âœ… **Google Chrome** (Manifest V3)
- âœ… **Mozilla Firefox** (Manifest V2)
- âœ… **Microsoft Edge** (Manifest V3)

## å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
npm install
```

### æ„å»ºæ‰€æœ‰æµè§ˆå™¨ç‰ˆæœ¬

```bash
npm run build:all
```

### æ„å»ºç‰¹å®šæµè§ˆå™¨ç‰ˆæœ¬

```bash
# Chromeç‰ˆæœ¬
npm run build:chrome

# Firefoxç‰ˆæœ¬
npm run build:firefox

# Edgeç‰ˆæœ¬
npm run build:edge
```

### å¼€å‘æ¨¡å¼

```bash
# å¼€å‘Chromeç‰ˆæœ¬
npm run dev:chrome

# å¼€å‘Firefoxç‰ˆæœ¬
npm run dev:firefox

# å¼€å‘Edgeç‰ˆæœ¬
npm run dev:edge
```

### æ¸…ç†æ„å»ºæ–‡ä»¶

```bash
npm run clean
```

## é¡¹ç›®ç»“æ„

```
chrome-extension-allow-copy/
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ _locales/          # å›½é™…åŒ–æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ en/            # è‹±æ–‡
â”‚   â”‚   â””â”€â”€ zh_CN/         # ä¸­æ–‡
â”‚   â”œâ”€â”€ manifests/         # æµè§ˆå™¨ç‰¹å®šçš„manifestæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ chrome.json    # Chrome/Edge manifest
â”‚   â”‚   â”œâ”€â”€ firefox.json   # Firefox manifest
â”‚   â”‚   â””â”€â”€ edge.json      # Edge manifest
â”‚   â”œâ”€â”€ background.js      # åå°è„šæœ¬
â”‚   â”œâ”€â”€ content_script.js  # å†…å®¹è„šæœ¬
â”‚   â”œâ”€â”€ popup.html         # å¼¹çª—HTML
â”‚   â”œâ”€â”€ popup.js           # å¼¹çª—è„šæœ¬
â”‚   â”œâ”€â”€ popup.css          # å¼¹çª—æ ·å¼
â”‚   â”œâ”€â”€ inject_script.js   # æ³¨å…¥è„šæœ¬
â”‚   â””â”€â”€ i18n.js            # å›½é™…åŒ–è„šæœ¬
â”œâ”€â”€ icons/                 # å›¾æ ‡æ–‡ä»¶
â”‚   â”œâ”€â”€ icon*.png          # æ™®é€šçŠ¶æ€å›¾æ ‡
â”‚   â””â”€â”€ icon-fill*.png     # æ¿€æ´»çŠ¶æ€å›¾æ ‡
â”œâ”€â”€ dist-chrome/           # Chromeæ„å»ºè¾“å‡º
â”œâ”€â”€ dist-firefox/          # Firefoxæ„å»ºè¾“å‡º
â”œâ”€â”€ dist-edge/             # Edgeæ„å»ºè¾“å‡º
â”œâ”€â”€ webpack.config.js      # Webpacké…ç½®ï¼ˆå¤šæµè§ˆå™¨æ”¯æŒï¼‰
â”œâ”€â”€ .babelrc              # Babelé…ç½®
â”œâ”€â”€ .gitignore            # Gitå¿½ç•¥æ–‡ä»¶
â””â”€â”€ package.json          # é¡¹ç›®é…ç½®
```

## å®‰è£…æ‰©å±•

### Chromeæµè§ˆå™¨

1. è¿è¡Œ `npm run build:chrome` æ„å»ºChromeç‰ˆæœ¬
2. æ‰“å¼€Chromeæµè§ˆå™¨
3. è®¿é—® `chrome://extensions/`
4. å¼€å¯"å¼€å‘è€…æ¨¡å¼"
5. ç‚¹å‡»"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"
6. é€‰æ‹© `dist-chrome` ç›®å½•

### Firefoxæµè§ˆå™¨

1. è¿è¡Œ `npm run build:firefox` æ„å»ºFirefoxç‰ˆæœ¬
2. æ‰“å¼€Firefoxæµè§ˆå™¨
3. è®¿é—® `about:debugging`
4. ç‚¹å‡»"æ­¤Firefox"
5. ç‚¹å‡»"ä¸´æ—¶è½½å…¥é™„åŠ ç»„ä»¶"
6. é€‰æ‹© `dist-firefox/manifest.json` æ–‡ä»¶

### Edgeæµè§ˆå™¨

1. è¿è¡Œ `npm run build:edge` æ„å»ºEdgeç‰ˆæœ¬
2. æ‰“å¼€Edgeæµè§ˆå™¨
3. è®¿é—® `edge://extensions/`
4. å¼€å¯"å¼€å‘äººå‘˜æ¨¡å¼"
5. ç‚¹å‡»"åŠ è½½è§£å‹ç¼©çš„æ‰©å±•"
6. é€‰æ‹© `dist-edge` ç›®å½•

## åŠŸèƒ½è¯´æ˜

### å¤åˆ¶åŠŸèƒ½

- **ä¸€é”®å¤åˆ¶**ï¼šç‚¹å‡»æ‰©å±•å›¾æ ‡ï¼Œåœ¨å¼¹çª—ä¸­å¼€å¯/å…³é—­å¤åˆ¶åŠŸèƒ½
- **å¿«æ·é”®æ”¯æŒ**ï¼š
  - `Ctrl+C` / `Cmd+C`ï¼šå¤åˆ¶é€‰ä¸­æ–‡æœ¬
  - `Ctrl+Shift+C` / `Cmd+Shift+C`ï¼šå¼ºåˆ¶å¤åˆ¶ï¼ˆå³ä½¿æ²¡æœ‰é€‰ä¸­æ–‡æœ¬ï¼‰
  - `Ctrl+Shift+A` / `Cmd+Shift+A`ï¼šå¤åˆ¶é¡µé¢æ‰€æœ‰æ–‡æœ¬

### å›¾æ ‡çŠ¶æ€

æ‰©å±•å›¾æ ‡ä¼šæ ¹æ®åŠŸèƒ½çŠ¶æ€åŠ¨æ€å˜åŒ–ï¼š
- **å¼€å¯çŠ¶æ€**ï¼šæ˜¾ç¤ºå¡«å……å›¾æ ‡ (icon-fill*.png)
- **å…³é—­çŠ¶æ€**ï¼šæ˜¾ç¤ºæ™®é€šå›¾æ ‡ (icon*.png)

### ç‰¹æ®Šç½‘ç«™æ”¯æŒ

- **é£ä¹¦æ–‡æ¡£**ï¼šé’ˆå¯¹ `larkoffice.com` çš„ç‰¹æ®Šæ–‡æœ¬æå–
- **é€šç”¨æ”¯æŒ**ï¼šé€‚ç”¨äºæ‰€æœ‰ç½‘é¡µçš„å¤åˆ¶é™åˆ¶ç»•è¿‡

## å¼€å‘æŒ‡å—

### ä¸»è¦è„šæœ¬è¯´æ˜

- **background.js**: åå°è„šæœ¬ï¼Œå¤„ç†æ‰©å±•çš„å®‰è£…ã€å­˜å‚¨åˆå§‹åŒ–å’Œå›¾æ ‡åˆ‡æ¢
- **content_script.js**: å†…å®¹è„šæœ¬ï¼Œæ³¨å…¥åˆ°ç½‘é¡µä¸­ï¼Œå®ç°å¤åˆ¶åŠŸèƒ½çš„æ ¸å¿ƒé€»è¾‘
- **popup.js**: å¼¹çª—è„šæœ¬ï¼Œå¤„ç†ç”¨æˆ·ç•Œé¢çš„äº¤äº’å’Œå›¾æ ‡æ›´æ–°æ¶ˆæ¯å‘é€
- **inject_script.js**: æ³¨å…¥è„šæœ¬ï¼Œç”¨äºç»•è¿‡ç½‘é¡µçš„å¤åˆ¶é™åˆ¶
- **i18n.js**: å›½é™…åŒ–è„šæœ¬ï¼Œå¤„ç†å¤šè¯­è¨€æ”¯æŒ

### æµè§ˆå™¨å…¼å®¹æ€§å¤„ç†

é¡¹ç›®é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°è·¨æµè§ˆå™¨å…¼å®¹ï¼š

#### **Manifestç‰ˆæœ¬å·®å¼‚**
- **Chrome/Edge**: ä½¿ç”¨Manifest V3 (`manifest_version: 3`)
- **Firefox**: ä½¿ç”¨Manifest V2 (`manifest_version: 2`)

#### **APIå·®å¼‚å¤„ç†**
- **å›¾æ ‡è®¾ç½®**: è‡ªåŠ¨æ£€æµ‹æµè§ˆå™¨ç±»å‹ï¼Œä½¿ç”¨å¯¹åº”çš„API
  - Chrome/Edge: `chrome.action.setIcon()`
  - Firefox: `chrome.browserAction.setIcon()`
- **è„šæœ¬æ³¨å…¥**: æ ¹æ®æµè§ˆå™¨ç±»å‹é€‰æ‹©ä¸åŒçš„æ³¨å…¥æ–¹æ³•
  - Chrome/Edge: `chrome.scripting.executeScript()`
  - Firefox: `chrome.tabs.executeScript()`

#### **æƒé™å·®å¼‚**
- **Chrome/Edge**: éœ€è¦ `scripting` æƒé™
- **Firefox**: éœ€è¦ `tabs` æƒé™å’Œ `<all_urls>` æƒé™

### Webpacké…ç½®

é¡¹ç›®ä½¿ç”¨Webpack 5è¿›è¡Œæ¨¡å—æ‰“åŒ…ï¼Œæ”¯æŒå¤šæµè§ˆå™¨æ„å»ºï¼š

- **ç¯å¢ƒè‡ªåŠ¨æ£€æµ‹**: æ ¹æ®`--mode`å‚æ•°è‡ªåŠ¨åˆ‡æ¢å¼€å‘/ç”Ÿäº§æ¨¡å¼
- **æµè§ˆå™¨ç‰¹å®šæ„å»º**: é€šè¿‡`--env browser`å‚æ•°æ„å»ºä¸åŒæµè§ˆå™¨ç‰ˆæœ¬
- **å¼€å‘æ¨¡å¼ç‰¹æ€§**:
  - æ–‡ä»¶å˜åŒ–ç›‘å¬ (`--watch`)
  - Source mapæ”¯æŒ
  - CSSçƒ­æ³¨å…¥
  - å¿«é€Ÿæ„å»º
- **ç”Ÿäº§æ¨¡å¼ç‰¹æ€§**:
  - ä»£ç å‹ç¼©ä¼˜åŒ–
  - CSSæ–‡ä»¶æå–
  - èµ„æºä¼˜åŒ–
- **å¤šå…¥å£ç‚¹**: æ¯ä¸ªè„šæœ¬æ–‡ä»¶éƒ½æ˜¯ç‹¬ç«‹çš„å…¥å£ç‚¹
- **ä»£ç åˆ†å‰²**: è‡ªåŠ¨å¤„ç†æ¨¡å—ä¾èµ–å…³ç³»

## æŠ€æœ¯æ ˆ

- **Webpack 5** - æ¨¡å—æ‰“åŒ…å™¨
- **Babel** - JavaScriptç¼–è¯‘å™¨
- **CSS3** - æ ·å¼è®¾è®¡
- **Chrome Extension API** - æ‰©å±•å¼€å‘
- **WebExtensions API** - è·¨æµè§ˆå™¨æ‰©å±•API
- **ES6+** - ç°ä»£JavaScriptè¯­æ³•

## æ„å»ºå‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
npm install

# æ„å»ºæ‰€æœ‰æµè§ˆå™¨ç‰ˆæœ¬
npm run build:all

# æ„å»ºç‰¹å®šæµè§ˆå™¨ç‰ˆæœ¬
npm run build:chrome
npm run build:firefox
npm run build:edge

# å¼€å‘æ¨¡å¼ï¼ˆç›‘å¬æ–‡ä»¶å˜åŒ–ï¼‰
npm run dev:chrome
npm run dev:firefox
npm run dev:edge

# æ¸…ç†æ„å»ºæ–‡ä»¶
npm run clean
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **localizeHtmlPage is not defined**
   - ç¡®ä¿è¿è¡Œäº†å¯¹åº”çš„æ„å»ºå‘½ä»¤
   - æ£€æŸ¥i18n.jsæ˜¯å¦æ­£ç¡®å¯¼å…¥

2. **æ‰©å±•æ— æ³•åŠ è½½**
   - æ£€æŸ¥manifest.jsonè¯­æ³•
   - ç¡®ä¿æ‰€æœ‰æ–‡ä»¶éƒ½å·²æ„å»º
   - ç¡®è®¤ä½¿ç”¨äº†æ­£ç¡®çš„æµè§ˆå™¨ç‰ˆæœ¬

3. **åŠŸèƒ½ä¸å·¥ä½œ**
   - æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
   - ç¡®ä¿æ‰©å±•æƒé™æ­£ç¡®
   - éªŒè¯æµè§ˆå™¨å…¼å®¹æ€§

4. **å›¾æ ‡ä¸åˆ‡æ¢**
   - ç¡®ä¿å›¾æ ‡æ–‡ä»¶å­˜åœ¨äºå¯¹åº”ç›®å½•
   - æ£€æŸ¥background.jsæ˜¯å¦æ­£ç¡®åŠ è½½

5. **Firefoxç‰ˆæœ¬é—®é¢˜**
   - ç¡®ä¿ä½¿ç”¨Firefoxå¼€å‘è€…ç‰ˆæœ¬æˆ–ESRç‰ˆæœ¬
   - æ£€æŸ¥manifest V2é…ç½®æ˜¯å¦æ­£ç¡®

6. **Edgeç‰ˆæœ¬é—®é¢˜**
   - ç¡®ä¿ä½¿ç”¨Edge 88+ç‰ˆæœ¬
   - æ£€æŸ¥manifest V3é…ç½®æ˜¯å¦æ­£ç¡®

### æµè§ˆå™¨ç‰¹å®šé—®é¢˜

#### **Chrome**
- éœ€è¦Chrome 88+ç‰ˆæœ¬
- ç¡®ä¿å¯ç”¨äº†Manifest V3æ”¯æŒ

#### **Firefox**
- éœ€è¦Firefox 78+ç‰ˆæœ¬
- å¯èƒ½éœ€è¦å¯ç”¨`xpinstall.signatures.required`ä¸ºfalseï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰

#### **Edge**
- éœ€è¦Edge 88+ç‰ˆæœ¬
- ç¡®ä¿å¯ç”¨äº†æ‰©å±•å¼€å‘è€…æ¨¡å¼

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

### å¼€å‘æµç¨‹

1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»ºPull Request

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ES6+è¯­æ³•
- éµå¾ªç°æœ‰çš„ä»£ç é£æ ¼
- æ·»åŠ é€‚å½“çš„æ³¨é‡Š
- ç¡®ä¿è·¨æµè§ˆå™¨å…¼å®¹æ€§

## è®¸å¯è¯

MIT License

## æ›´æ–°æ—¥å¿—

### v1.0.0
- âœ… åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… æ”¯æŒChromeã€Firefoxã€Edgeæµè§ˆå™¨
- âœ… è·¨æµè§ˆå™¨å…¼å®¹æ€§å¤„ç†
- âœ… åŠ¨æ€å›¾æ ‡åˆ‡æ¢åŠŸèƒ½
- âœ… å¤šè¯­è¨€æ”¯æŒ
- âœ… ç°ä»£åŒ–UIè®¾è®¡
